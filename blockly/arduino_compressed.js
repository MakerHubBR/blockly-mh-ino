// Do not edit this file; automatically generated by build.py.
'use strict';

Blockly.Arduino=new Blockly.Generator("Arduino");Blockly.Arduino.addReservedWords("setup,loop,if,else,for,switch,case,while,do,break,continue,return,goto,define,include,HIGH,LOW,INPUT,OUTPUT,INPUT_PULLUP,true,false,integer, constants,floating,point,void,bookean,char,unsigned,byte,int,word,long,float,double,string,String,array,static, volatile,const,sizeof,pinMode,digitalWrite,digitalRead,analogReference,analogRead,analogWrite,tone,noTone,shiftOut,shitIn,pulseIn,millis,micros,delay,delayMicroseconds,min,max,abs,constrain,map,pow,sqrt,sin,cos,tan,randomSeed,random,lowByte,highByte,bitRead,bitWrite,bitSet,bitClear,bit,attachInterrupt,detachInterrupt,interrupts,noInterrupts,servo,keypad,serial,irremote,lcd,stepper,SoftwareSerial,bt_serial,fnc_bt_serial_namepin,LiquidCrystal_I2C,encoder,rtc,bt_serial,gps,gps_serial,fnc_gps_update,gps_lat,gps_lon,gps_speed_kmph,gps_speed_mph,gps_altitude,gps_course,gps_fixed,gps_day,gps_month,gps_year,gps_hour,gps_min,gps_sec,gps_hund,sd_file,fnc_sd_print,fnc_sd_filesize,fnc_sd_readbyte,fnc_sd_writebyte,fnc_EEPROM_readDouble,fnc_EEPROM_writeDouble,keypad_3x4_keys,keypad_3x4_rp,keypad_3x4_cp,keypad_3x4,fnc_adxl335");
Blockly.Arduino.ORDER_ATOMIC=0;Blockly.Arduino.ORDER_UNARY_POSTFIX=1;Blockly.Arduino.ORDER_UNARY_PREFIX=2;Blockly.Arduino.ORDER_MULTIPLICATIVE=3;Blockly.Arduino.ORDER_ADDITIVE=4;Blockly.Arduino.ORDER_SHIFT=5;Blockly.Arduino.ORDER_RELATIONAL=6;Blockly.Arduino.ORDER_EQUALITY=7;Blockly.Arduino.ORDER_BITWISE_AND=8;Blockly.Arduino.ORDER_BITWISE_XOR=9;Blockly.Arduino.ORDER_BITWISE_OR=10;Blockly.Arduino.ORDER_LOGICAL_AND=11;Blockly.Arduino.ORDER_LOGICAL_OR=12;Blockly.Arduino.ORDER_CONDITIONAL=13;
Blockly.Arduino.ORDER_ASSIGNMENT=14;Blockly.Arduino.ORDER_NONE=99;
var profile={arduino_smd:{description:"Arduino ATMega328P SMD",digital:[["LED","LED_BUILTIN"],["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"],["A0","A0"],["A1","A1"],["A2","A2"],["A3","A3"],["A4","A4"],["A5","A5"],["A6","A6"],["A7","A7"]],PWM:[["3","3"],["5","5"],["6","6"],["9","9"],["10","10"],["11","11"]],analog:[["A0","A0"],["A1","A1"],["A2","A2"],["A3","A3"],["A4","A4"],["A5","A5"],["A6","A6"],
["A7","A7"]],serial:9600,logic_levels:[["ON","HIGH"],["OFF","LOW"]],ids:[["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"]]}};profile["default"]=profile.arduino_smd;Blockly.Arduino.pinDigitalValidator=function(a){return 0>profile.defaultBoard.digital.indexOf(a)?null:a};Blockly.Arduino.pinPWMValidator=function(a){return 0>profile.defaultBoard.PWM.indexOf(a)?null:a};
Blockly.Arduino.pinAnalogValidator=function(a){return 0>profile.defaultBoard.analog.indexOf(a)?null:a};Blockly.Arduino.pinDualValidator=function(a){var b=profile.defaultBoard.analog.indexOf(a),c=profile.defaultBoard.digital.indexOf(a);return 0>b+c?null:a};
Blockly.Arduino.init=function(a){Blockly.Arduino.definitions_=Object.create(null);Blockly.Arduino.setups_=Object.create(null);Blockly.Arduino.loops_=Object.create(null);Blockly.Arduino.functionNames_=Object.create(null);if(Blockly.Variables){Blockly.Arduino.variableDB_?Blockly.Arduino.variableDB_.reset():Blockly.Arduino.variableDB_=new Blockly.Names(Blockly.Arduino.RESERVED_WORDS_);var b=[];a=Blockly.Variables.allVariables(a);for(var c=0;c<a.length;c++)b[c]="float "+Blockly.Arduino.variableDB_.getName(a[c],
Blockly.Variables.NAME_TYPE)+";\n";Blockly.Arduino.definitions_.variables=b.join("\n")}};
Blockly.Arduino.finish=function(a){var b=[],c;for(c in Blockly.Arduino.loops_){var d=Blockly.Arduino.loops_[c];b.push(d)}a="  "+a.replace(/\n/g,"\n  ");a=a.replace(/\n\s+$/,"\n");a="void loop() \n{\n"+b.join("\n")+"\n"+a+"\n}";var b=[],e=[];for(c in Blockly.Arduino.definitions_)d=Blockly.Arduino.definitions_[c],d.match(/^#include/)?b.push(d):e.push(d);d=[];for(c in Blockly.Arduino.setups_)"arduino_setup"!=c&&d.push(Blockly.Arduino.setups_[c]);(c=Blockly.Arduino.setups_.arduino_setup)&&d.push(c);return(b.join("\n")+
"\n\n"+e.join("\n")+"\nvoid setup() \n{\n  "+d.join("\n  ")+"\n}\n\n").replace(/\n\n+/g,"\n\n").replace(/\n*$/,"\n\n\n")+a};Blockly.Arduino.scrubNakedValue=function(a){return a+";\n"};Blockly.Arduino.quote_=function(a){a=a.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'");return'"'+a+'"'};
Blockly.Arduino.scrub_=function(a,b){if(null===b)return"";var c="";if(!a.outputConnection||!a.outputConnection.targetConnection){var d=a.getCommentText();d&&(c+=Blockly.Arduino.prefixLines(d,"// ")+"\n");for(var e=0;e<a.inputList.length;e++)a.inputList[e].type==Blockly.INPUT_VALUE&&(d=a.inputList[e].connection.targetBlock())&&(d=Blockly.Arduino.allNestedComments(d))&&(c+=Blockly.Arduino.prefixLines(d,"// "))}e=a.nextConnection&&a.nextConnection.targetBlock();e=Blockly.Arduino.blockToCode(e);return c+
b+e};Blockly.Arduino.io={};Blockly.Arduino.io_digital_write=function(){var a=this.getFieldValue("PIN"),b=this.getFieldValue("STAT");Blockly.Arduino.setups_["setup_output_"+a]="pinMode("+a+", OUTPUT);";return"digitalWrite("+a+", "+b+");\n"};
Blockly.Arduino.io_digital_write2=function(){var a=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC)||"0",b=Blockly.Arduino.valueToCode(this,"STAT",Blockly.Arduino.ORDER_ATOMIC)||"false";Blockly.Arduino.setups_["setup_output_"+a]="pinMode("+a+", OUTPUT);";return"digitalWrite("+a+", "+(b?"HIGH":"LOW")+");\n"};Blockly.Arduino.io_digital_read=function(){var a=this.getFieldValue("PIN");Blockly.Arduino.setups_["setup_input_"+a]="pinMode("+a+", INPUT);";return["digitalRead("+a+")",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.io_digital_read2=function(){var a=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC)||"0";Blockly.Arduino.setups_["setup_input_"+a]="pinMode("+a+", INPUT);";return["digitalRead("+a+")",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.io_analog_write=function(){var a=this.getFieldValue("PIN"),b=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_ATOMIC);Blockly.Arduino.setups_["setup_output_"+a]="pinMode("+a+", OUTPUT);";return"analogWrite("+a+", "+b+");\n"};
Blockly.Arduino.io_analog_write2=function(){var a=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC)||"0",b=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_ATOMIC)||"0";Blockly.Arduino.setups_["setup_output_"+a]="pinMode("+a+", OUTPUT);";return"analogWrite("+a+", "+b+");\n"};Blockly.Arduino.io_analog_read=function(){var a=this.getFieldValue("PIN");Blockly.Arduino.setups_["setup_input_"+a]="pinMode("+a+", INPUT);";return["analogRead("+a+")",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.io_analog_read2=function(){var a=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC)||"0";Blockly.Arduino.setups_["setup_input_A"+a]="pinMode(A"+a+", INPUT);";return["analogRead(A"+a+")",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.variables={};Blockly.Arduino.variables_get=function(a){return[Blockly.Arduino.variableDB_.getName(a.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.variables_set=function(a){var b=Blockly.Arduino.valueToCode(a,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT)||"0";return Blockly.Arduino.variableDB_.getName(a.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE)+" = "+b+";\n"};Blockly.Arduino.eeprom={};Blockly.Arduino.eeprom_read_var=function(){Blockly.Arduino.definitions_.define_eeprom="#include &lt;EEPROM.h&gt;\n";return["EEPROM.read("+(Blockly.Arduino.valueToCode(this,"ADDR",Blockly.Arduino.ORDER_ATOMIC)||"0")+")",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.eeprom_write_var=function(){Blockly.Arduino.definitions_.define_eeprom="#include &lt;EEPROM.h&gt;\n";var a=Blockly.Arduino.valueToCode(this,"ADDR",Blockly.Arduino.ORDER_ATOMIC)||"0",b=Blockly.Arduino.valueToCode(this,"VAL",Blockly.Arduino.ORDER_ATOMIC)||"0";return"EEPROM.write("+a+", "+b+");\r"};Blockly.Arduino.bluetooth={};function setupBluetooth(){Blockly.Arduino.definitions_.define_softserial="#include &lt;SoftwareSerial.h&gt;\n";Blockly.Arduino.definitions_.var_bluetooth||(Blockly.Arduino.definitions_.var_bluetooth=" SoftwareSerial bt_serial(2,3); //RX<->TX");Blockly.Arduino.setups_.setup_bluetooth||(Blockly.Arduino.setups_.setup_bluetooth="\tbt_serial.begin(9600);\n")}
Blockly.Arduino.bluetooth_init=function(){var a=this.getFieldValue("BAUD"),b=this.getFieldValue("RX"),c=this.getFieldValue("TX");setupBluetooth();Blockly.Arduino.definitions_.var_bluetooth="SoftwareSerial bt_serial("+c+","+b+");\n";Blockly.Arduino.setups_.setup_bluetooth="bt_serial.begin("+a+");\n";return""};
Blockly.Arduino.bluetooth_name=function(){setupBluetooth();Blockly.Arduino.definitions_.fnc_bt_serial_namepin='void fnc_bt_serial_namepin(String _name,String _pin){\n\tbt_serial.println(String("AT+NAME")+_name);\n\tdelay(250);\n\twhile(bt_serial.available()>0)bt_serial.read();\n\tbt_serial.println(String("AT+PIN")+_pin);\n\tdelay(250);\n}';var a=Blockly.Arduino.valueToCode(this,"DEVNAME",Blockly.Arduino.ORDER_ATOMIC)||"'ArduinoBlocks'",b=Blockly.Arduino.valueToCode(this,"DEVPIN",Blockly.Arduino.ORDER_ATOMIC)||
"'1234'";return"fnc_bt_serial_namepin("+a+","+b+");\n"};Blockly.Arduino.bluetooth_timeout=function(){setupBluetooth();return"bt_serial.setTimeout("+Blockly.Arduino.valueToCode(this,"MS",Blockly.Arduino.ORDER_ATOMIC)+");\n"};Blockly.Arduino.bluetooth_print=function(){setupBluetooth();var a=Blockly.Arduino.valueToCode(this,"STRINGOUTPUT",Blockly.Arduino.ORDER_ATOMIC)||"''";return"TRUE"==this.getFieldValue("NEWLINE")?"bt_serial.println("+a+");\n":"bt_serial.print("+a+");\n"};
Blockly.Arduino.bluetooth_println=function(){setupBluetooth();return"bt_serial.println("+(Blockly.Arduino.valueToCode(this,"STRINGOUTPUT",Blockly.Arduino.ORDER_ATOMIC)||"''")+");\n"};Blockly.Arduino.bluetooth_write_byte=function(){setupBluetooth();return"bt_serial.write((byte)"+(Blockly.Arduino.valueToCode(this,"BYTE",Blockly.Arduino.ORDER_ATOMIC)||"0")+");\n"};
Blockly.Arduino.bluetooth_read_float=function(){setupBluetooth();return["TRUE"==this.getFieldValue("NEWLINE")?"atof((bt_serial.readStringUntil('\\n')).c_str());":"bt_serial.parseFloat()",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.bluetooth_read_byte=function(){setupBluetooth();return["bt_serial.read()",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.bluetooth_read_string=function(){setupBluetooth();return["bt_serial.readString()",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.bluetooth_read_string_line=function(){setupBluetooth();return["bt_serial.readStringUntil('\\n')",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.bluetooth_read_available=function(){setupBluetooth();return["(bt_serial.available()>0)",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.serial={};function setupSerial(){Blockly.Arduino.setups_.setup_serial||(Blockly.Arduino.setups_.setup_serial="Serial.begin(9600);\n")}Blockly.Arduino.serial_init=function(){var a=this.getFieldValue("BAUD");Blockly.Arduino.setups_.setup_serial="Serial.begin("+a+");\n";return""};Blockly.Arduino.serial_timeout=function(){setupSerial();return"Serial.setTimeout("+Blockly.Arduino.valueToCode(this,"MS",Blockly.Arduino.ORDER_ATOMIC)+");\n"};
Blockly.Arduino.serial_print=function(){setupSerial();var a=Blockly.Arduino.valueToCode(this,"STRINGOUTPUT",Blockly.Arduino.ORDER_ATOMIC)||"''";return"TRUE"==this.getFieldValue("NEWLINE")?"Serial.println("+a+");\n":"Serial.print("+a+");\n"};Blockly.Arduino.serial_println=function(){setupSerial();return"Serial.println("+(Blockly.Arduino.valueToCode(this,"STRINGOUTPUT",Blockly.Arduino.ORDER_ATOMIC)||"''")+");\n"};
Blockly.Arduino.serial_write_byte=function(){setupSerial();return"Serial.write((byte)"+(Blockly.Arduino.valueToCode(this,"BYTE",Blockly.Arduino.ORDER_ATOMIC)||"0")+");\n"};Blockly.Arduino.serial_read_float=function(){setupSerial();return["TRUE"==this.getFieldValue("NEWLINE")?"atof((Serial.readStringUntil('\\n')).c_str());":"Serial.parseFloat()",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.serial_read_byte=function(){setupSerial();return["Serial.read()",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.serial_read_string=function(){setupSerial();return["TRUE"==this.getFieldValue("NEWLINE")?"Serial.readStringUntil('\\n')":"Serial.readString()",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.serial_read_string_line=function(){setupSerial();code="Serial.readStringUntil('\\n')";return[code,Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.serial_read_available=function(){setupSerial();return["(Serial.available()>0)",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.time={};Blockly.Arduino.time_delay=function(){return"delay("+(Blockly.Arduino.valueToCode(this,"DELAY_TIME_MILI",Blockly.Arduino.ORDER_ATOMIC)||"0")+");\n"};Blockly.Arduino.time_delaymicros=function(){return"delayMicroseconds("+(Blockly.Arduino.valueToCode(this,"DELAY_TIME_MICRO",Blockly.Arduino.ORDER_ATOMIC)||"0")+");\n"};Blockly.Arduino.time_millis=function(){return["millis()",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.time_micros=function(){return["micros()",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.infinite_loop=function(){return"while(true);\n"};Blockly.Arduino.time_runeveryms=function(){var a=Blockly.Arduino.statementToCode(this,"DO"),b=Blockly.Arduino.valueToCode(this,"MS",Blockly.Arduino.ORDER_ATOMIC)||"0",c=Blockly.Arduino.variableDB_.getDistinctName("task_time_ms",Blockly.Variables.NAME_TYPE);Blockly.Arduino.definitions_["var_"+c]="unsigned long "+c+"=0;\n";a=""+("if((millis()-"+c+")>="+b+"){\n")+("\t"+c+"=millis();\n")+a;return a+="}\n"};Blockly.Arduino.math={};Blockly.Arduino.addReservedWords("Math");Blockly.Arduino.math_number=function(a){a=parseFloat(a.getFieldValue("NUM"));var b;Infinity==a?(a="INFINITY",b=Blockly.Arduino.ORDER_UNARY_POSTFIX):-Infinity==a?(a="-INFINITY",b=Blockly.Arduino.ORDER_UNARY_PREFIX):b=0>a?Blockly.Arduino.ORDER_UNARY_PREFIX:Blockly.Arduino.ORDER_ATOMIC;return[a,b]};
Blockly.Arduino.math_arithmetic=function(a){var b={ADD:[" + ",Blockly.Arduino.ORDER_ADDITIVE],MINUS:[" - ",Blockly.Arduino.ORDER_ADDITIVE],MULTIPLY:[" * ",Blockly.Arduino.ORDER_MULTIPLICATIVE],DIVIDE:[" / ",Blockly.Arduino.ORDER_MULTIPLICATIVE],POWER:[null,Blockly.Arduino.ORDER_NONE]}[a.getFieldValue("OP")],c=b[0],b=b[1],d=Blockly.Arduino.valueToCode(a,"A",b)||"0";a=Blockly.Arduino.valueToCode(a,"B",b)||"0";return[d+c+a,b]};
Blockly.Arduino.math_single=function(a){var b=a.getFieldValue("OP"),c;if("NEG"==b)return a=Blockly.Arduino.valueToCode(a,"NUM",Blockly.Arduino.ORDER_UNARY_PREFIX)||"0","-"==a[0]&&(a=" "+a),["-"+a,Blockly.Arduino.ORDER_UNARY_PREFIX];a="ABS"==b||"ROUND"==b.substring(0,5)?Blockly.Arduino.valueToCode(a,"NUM",Blockly.Arduino.ORDER_UNARY_POSTFIX)||"0":"SIN"==b||"COS"==b||"TAN"==b?Blockly.Arduino.valueToCode(a,"NUM",Blockly.Arduino.ORDER_MULTIPLICATIVE)||"0":Blockly.Arduino.valueToCode(a,"NUM",Blockly.Arduino.ORDER_NONE)||
"0";switch(b){case "ABS":c="abs("+a+")";break;case "ROOT":c="sqrt("+a+")";break;case "LN":c="log("+a+")";break;case "EXP":c="exp("+a+")";break;case "POW10":c="pow(10,"+a+")";break;case "ROUND":c="round("+a+")";break;case "ROUNDUP":c="ceil("+a+")";break;case "ROUNDDOWN":c="floor("+a+")";break;case "SIN":c="sin("+a+" / 180 * M_PI)";break;case "COS":c="cos("+a+" / 180 * M_PI)";break;case "TAN":c="tan("+a+" / 180 * M_PI)"}if(c)return[c,Blockly.Arduino.ORDER_UNARY_POSTFIX];switch(b){case "LOG10":c="log("+
a+") / log(10)";break;case "ASIN":c="asin("+a+") / M_PI * 180";break;case "ACOS":c="acos("+a+") / M_PI * 180";break;case "ATAN":c="atan("+a+") / M_PI * 180";break;default:throw"Unknown math operator: "+b;}return[c,Blockly.Arduino.ORDER_MULTIPLICATIVE]};
Blockly.Arduino.math_constant=function(a){var b={PI:["M_PI",Blockly.Arduino.ORDER_UNARY_POSTFIX],E:["M_E",Blockly.Arduino.ORDER_UNARY_POSTFIX],GOLDEN_RATIO:["(1 + sqrt(5)) / 2",Blockly.Arduino.ORDER_MULTIPLICATIVE],SQRT2:["M_SQRT2",Blockly.Arduino.ORDER_UNARY_POSTFIX],SQRT1_2:["M_SQRT1_2",Blockly.Arduino.ORDER_UNARY_POSTFIX],INFINITY:["INFINITY",Blockly.Arduino.ORDER_ATOMIC]};a=a.getFieldValue("CONSTANT");return b[a]};
Blockly.Arduino.math_number_property=function(a){var b=Blockly.Arduino.valueToCode(a,"NUMBER_TO_CHECK",Blockly.Arduino.ORDER_MULTIPLICATIVE);if(!b)return["false",Blockly.Python.ORDER_ATOMIC];var c=a.getFieldValue("PROPERTY"),d;if("PRIME"==c)return[Blockly.Arduino.provideFunction_("math_isPrime",["bool "+Blockly.Arduino.FUNCTION_NAME_PLACEHOLDER_+"(int n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if (n == 2 || n == 3) {","    return true;","  }","  // False if n is null, negative, is 1, or not whole.",
"  // And false if n is divisible by 2 or 3.","  if (n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for (int x = 6; x <= sqrt(n) + 1; x += 6) {","    if (n % (x - 1) == 0 || n % (x + 1) == 0) {","      return false;","    }","  }","  return true;","}"])+"("+b+")",Blockly.Arduino.ORDER_UNARY_POSTFIX];switch(c){case "EVEN":d=b+" % 2 == 0";break;case "ODD":d=b+" % 2 == 1";break;case "WHOLE":d=b+" % 1 == 0";
break;case "POSITIVE":d=b+" > 0";break;case "NEGATIVE":d=b+" < 0";break;case "DIVISIBLE_BY":a=Blockly.Arduino.valueToCode(a,"DIVISOR",Blockly.Arduino.ORDER_MULTIPLICATIVE);if(!a)return["false",Blockly.Python.ORDER_ATOMIC];d=b+" % "+a+" == 0"}return[d,Blockly.Arduino.ORDER_EQUALITY]};
Blockly.Arduino.math_change=function(a){var b=Blockly.Arduino.valueToCode(a,"DELTA",Blockly.Arduino.ORDER_ADDITIVE)||"0";return Blockly.Arduino.variableDB_.getName(a.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE)+" += "+b+";\n"};Blockly.Arduino.math_round=Blockly.Arduino.math_single;Blockly.Arduino.math_trig=Blockly.Arduino.math_single;
Blockly.Arduino.math_modulo=function(a){var b=Blockly.Arduino.valueToCode(a,"DIVIDEND",Blockly.Arduino.ORDER_MULTIPLICATIVE)||"0";a=Blockly.Arduino.valueToCode(a,"DIVISOR",Blockly.Arduino.ORDER_MULTIPLICATIVE)||"0";return[b+" % "+a,Blockly.Arduino.ORDER_MULTIPLICATIVE]};
Blockly.Arduino.math_map=function(){var a=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_COMMA)||"0",b=Blockly.Arduino.valueToCode(this,"FROMLOW",Blockly.Arduino.ORDER_COMMA)||"0",c=Blockly.Arduino.valueToCode(this,"FROMHIGH",Blockly.Arduino.ORDER_COMMA)||"Infinity",d=Blockly.Arduino.valueToCode(this,"TOLOW",Blockly.Arduino.ORDER_COMMA)||"0",e=Blockly.Arduino.valueToCode(this,"TOHIGH",Blockly.Arduino.ORDER_COMMA)||"Infinity";return["map("+a+", "+b+", "+c+", "+d+", "+e+")",Blockly.Arduino.ORDER_FUNCTION_CALL]};
Blockly.Arduino.math_constrain=function(a){a=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_COMMA)||"0";var b=Blockly.Arduino.valueToCode(this,"LOW",Blockly.Arduino.ORDER_COMMA)||"0",c=Blockly.Arduino.valueToCode(this,"HIGH",Blockly.Arduino.ORDER_COMMA)||"Infinity";return["constrain("+a+", "+b+", "+c+")",Blockly.Arduino.ORDER_FUNCTION_CALL]};
Blockly.Arduino.math_random_int=function(a){Blockly.Arduino.setups_.setup_random="randomSeed(analogRead(0));";var b=Blockly.Arduino.valueToCode(a,"FROM",Blockly.Arduino.ORDER_NONE)||"0";a=Blockly.Arduino.valueToCode(a,"TO",Blockly.Arduino.ORDER_NONE)||"0";return["random("+b+", "+a+")",Blockly.Arduino.ORDER_UNARY_POSTFIX]};Blockly.Arduino.math_random_float=function(a){Blockly.Arduino.setups_.setup_random="randomSeed(analogRead(0));";return["float(random(0, INT32_MAX) / INT32_MAX)",Blockly.Arduino.ORDER_UNARY_POSTFIX]};Blockly.Arduino.procedures={};Blockly.Arduino.arduino_loop=function(){return Blockly.Arduino.statementToCode(this,"DO")};Blockly.Arduino.arduino_setup=function(){var a=Blockly.Arduino.statementToCode(this,"DO");a&&(Blockly.Arduino.setups_.arduino_setup=a);return null};
Blockly.Arduino.procedures_defreturn=function(a){var b=Blockly.Arduino.variableDB_.getName(a.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),c=Blockly.Arduino.statementToCode(a,"STACK");Blockly.Arduino.STATEMENT_PREFIX&&(c=Blockly.Arduino.prefixLines(Blockly.Arduino.STATEMENT_PREFIX.replace(/%1/g,"'"+a.id+"'"),Blockly.Arduino.INDENT)+c);Blockly.Arduino.INFINITE_LOOP_TRAP&&(c=Blockly.Arduino.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+a.id+"'")+c);var d=Blockly.Arduino.valueToCode(a,"RETURN",Blockly.Arduino.ORDER_NONE)||
"";d&&(d="  return "+d+";\n");for(var e=d?"float":"void",g=[],f=0;f<a.arguments_.length;f++)g[f]=Blockly.Arduino.variableDB_.getName(a.arguments_[f],Blockly.Variables.NAME_TYPE);c=e+" "+b+"("+g.join(", ")+") {\n"+c+d+"}";c=Blockly.Arduino.scrub_(a,c);Blockly.Arduino.definitions_["%"+b]=c;return null};Blockly.Arduino.procedures_defnoreturn=Blockly.Arduino.procedures_defreturn;
Blockly.Arduino.procedures_callreturn=function(a){for(var b=Blockly.Arduino.variableDB_.getName(a.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),c=[],d=0;d<a.arguments_.length;d++)c[d]=Blockly.Arduino.valueToCode(a,"ARG"+d,Blockly.Arduino.ORDER_NONE)||"null";return[b+"("+c.join(", ")+")",Blockly.Arduino.ORDER_UNARY_POSTFIX]};
Blockly.Arduino.procedures_callnoreturn=function(a){for(var b=Blockly.Arduino.variableDB_.getName(a.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),c=[],d=0;d<a.arguments_.length;d++)c[d]=Blockly.Arduino.valueToCode(a,"ARG"+d,Blockly.Arduino.ORDER_NONE)||"null";return b+"("+c.join(", ")+");\n"};
Blockly.Arduino.procedures_ifreturn=function(a){var b="if ("+(Blockly.Arduino.valueToCode(a,"CONDITION",Blockly.Arduino.ORDER_NONE)||"false")+") {\n";a.hasReturnValue_?(a=Blockly.Arduino.valueToCode(a,"VALUE",Blockly.Arduino.ORDER_NONE)||"null",b+="  return "+a+";\n"):b+="  return;\n";return b+"}\n"};Blockly.Arduino.texts={};Blockly.Arduino.addReservedWords("Html,Math");Blockly.Arduino.text=function(a){return[Blockly.Arduino.quote_(a.getFieldValue("TEXT")),Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.text_format=function(){var a=this.getFieldValue("FORMAT");return["String((long)"+(Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_UNARY_NEGATION)||"0")+", "+a+")",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.text_format_decimal=function(){var a=this.getFieldValue("DECIMALS");return["String("+(Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_UNARY_NEGATION)||"0")+", "+a+")",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.text_join=function(a){for(var b="",c=0;c<a.itemCount_;c++){var d=Blockly.Arduino.valueToCode(a,"ADD"+c,Blockly.Arduino.ORDER_COMMA)||"";""!=d&&(""!=b&&(b+=" + "),b=d.startsWith('"')?b+("String("+d+")"):d.startsWith("String(")?b+d:b+("String("+d+")"))}return[b,Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.text_length=function(a){return["String("+(Blockly.Arduino.valueToCode(a,"VALUE",Blockly.Arduino.ORDER_MEMBER)||"''")+").length()",Blockly.Arduino.ORDER_FUNCTION_CALL]};
Blockly.Arduino.text_indexOf=function(a){var b="FIRST"==a.getFieldValue("END")?"indexOf":"lastIndexOf",c=Blockly.Arduino.valueToCode(a,"FIND",Blockly.Arduino.ORDER_NONE)||"''";return["String("+(Blockly.Arduino.valueToCode(a,"VALUE",Blockly.Arduino.ORDER_UNARY_POSTFIX)||"''")+")."+b+"("+c+")",Blockly.Arduino.ORDER_FUNCTION_CALL]};
Blockly.Arduino.text_changeCase=function(a){var b={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[a.getFieldValue("CASE")];a=Blockly.Arduino.valueToCode(a,"TEXT",b?Blockly.Arduino.ORDER_UNARY_POSTFIX:Blockly.Arduino.ORDER_NONE)||"''";return[b?"String("+a+")."+b:"String("+a+")",Blockly.Arduino.ORDER_UNARY_POSTFIX]};Blockly.Arduino.text_trim=function(a){return["String("+(Blockly.Arduino.valueToCode(a,"TEXT",Blockly.Arduino.ORDER_UNARY_POSTFIX)||"''")+").trim()",Blockly.Arduino.ORDER_UNARY_POSTFIX]};
Blockly.Arduino.text_print=function(a){return['Serial.println("'+(Blockly.Arduino.valueToCode(a,"TEXT",Blockly.Arduino.ORDER_NONE)||"''")+'")',Blockly.Arduino.ORDER_UNARY_POSTFIX]};
Blockly.Arduino.text_replace=function(a){var b=Blockly.Arduino.valueToCode(a,"TEXT",Blockly.Arduino.ORDER_UNARY_POSTFIX)||"''",c=Blockly.Arduino.valueToCode(a,"FROM",Blockly.Arduino.ORDER_NONE)||"''";a=Blockly.Arduino.valueToCode(a,"TO",Blockly.Arduino.ORDER_NONE)||"''";return["String("+b+").replace(String("+c+"), String("+a+"))",Blockly.Arduino.ORDER_UNARY_POSTFIX]};Blockly.Arduino.logic={};Blockly.Arduino.controls_if=function(a){var b=0,c="",d,e;do e=Blockly.Arduino.valueToCode(a,"IF"+b,Blockly.Arduino.ORDER_NONE)||"false",d=Blockly.Arduino.statementToCode(a,"DO"+b),c+=(0<b?"else ":"")+"if ("+e+") {\n"+d+"}",++b;while(a.getInput("IF"+b));a.getInput("ELSE")&&(d=Blockly.Arduino.statementToCode(a,"ELSE"),c+=" else {\n"+d+"}");return c+"\n"};Blockly.Arduino.controls_ifelse=Blockly.Arduino.controls_if;
Blockly.Arduino.logic_compare=function(a){var b={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[a.getFieldValue("OP")],c="=="==b||"!="==b?Blockly.Arduino.ORDER_EQUALITY:Blockly.Arduino.ORDER_RELATIONAL,d=Blockly.Arduino.valueToCode(a,"A",c)||"0";a=Blockly.Arduino.valueToCode(a,"B",c)||"0";return[d+" "+b+" "+a,c]};
Blockly.Arduino.logic_operation=function(a){var b="AND"==a.getFieldValue("OP")?"&&":"||",c="&&"==b?Blockly.Arduino.ORDER_LOGICAL_AND:Blockly.Arduino.ORDER_LOGICAL_OR,d=Blockly.Arduino.valueToCode(a,"A",c);a=Blockly.Arduino.valueToCode(a,"B",c);if(d||a){var e="&&"==b?"true":"false";d||(d=e);a||(a=e)}else a=d="false";return[d+" "+b+" "+a,c]};Blockly.Arduino.logic_negate=function(a){var b=Blockly.Arduino.ORDER_UNARY_PREFIX;return["!"+(Blockly.Arduino.valueToCode(a,"BOOL",b)||"true"),b]};
Blockly.Arduino.logic_boolean=function(a){return["TRUE"==a.getFieldValue("BOOL")?"true":"false",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.logic_boolean2=function(){return["TRUE"==this.getFieldValue("BOOL")?"true":"false",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.logic_null=function(a){return["null",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.logic_ternary=function(a){var b=Blockly.Arduino.valueToCode(a,"IF",Blockly.Arduino.ORDER_CONDITIONAL)||"false",c=Blockly.Arduino.valueToCode(a,"THEN",Blockly.Arduino.ORDER_CONDITIONAL)||"null";a=Blockly.Arduino.valueToCode(a,"ELSE",Blockly.Arduino.ORDER_CONDITIONAL)||"null";return["(("+b+") ? "+c+" : "+a+")",Blockly.Arduino.ORDER_CONDITIONAL]};Blockly.Arduino.loops={};
Blockly.Arduino.controls_repeat_ext=function(a){var b=a.getField("TIMES")?String(Number(a.getFieldValue("TIMES"))):Blockly.Arduino.valueToCode(a,"TIMES",Blockly.Arduino.ORDER_ASSIGNMENT)||"0",c=Blockly.Arduino.statementToCode(a,"DO"),c=Blockly.Arduino.addLoopTrap(c,a.id);a="";var d=Blockly.Arduino.variableDB_.getDistinctName("count",Blockly.Variables.NAME_TYPE),e=b;b.match(/^\w+$/)||Blockly.isNumber(b)||(e=Blockly.Arduino.variableDB_.getDistinctName("repeat_end",Blockly.Variables.NAME_TYPE),a+="var "+
e+" = "+b+";\n");return a+("for (int "+d+" = 0; "+d+" < "+e+"; "+d+"++) {\n"+c+"}\n")};Blockly.Arduino.controls_repeat=Blockly.Arduino.controls_repeat_ext;Blockly.Arduino.controls_whileUntil=function(a){var b="UNTIL"==a.getFieldValue("MODE"),c=Blockly.Arduino.valueToCode(a,"BOOL",b?Blockly.Arduino.ORDER_UNARY_PREFIX:Blockly.Arduino.ORDER_NONE)||"false",d=Blockly.Arduino.statementToCode(a,"DO"),d=Blockly.Arduino.addLoopTrap(d,a.id);b&&(c="!"+c);return"while ("+c+") {\n"+d+"}\n"};
Blockly.Arduino.controls_for=function(a){var b=Blockly.Arduino.variableDB_.getName(a.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),c=Blockly.Arduino.valueToCode(a,"FROM",Blockly.Arduino.ORDER_ASSIGNMENT)||"0",d=Blockly.Arduino.valueToCode(a,"TO",Blockly.Arduino.ORDER_ASSIGNMENT)||"0",e=Blockly.Arduino.valueToCode(a,"BY",Blockly.Arduino.ORDER_ASSIGNMENT)||"1",g=Blockly.Arduino.statementToCode(a,"DO"),g=Blockly.Arduino.addLoopTrap(g,a.id);if(Blockly.isNumber(c)&&Blockly.isNumber(d)&&Blockly.isNumber(e)){var f=
parseFloat(c)<=parseFloat(d);a="for ("+b+" = "+c+"; "+b+(f?" <= ":" >= ")+d+"; "+b;b=Math.abs(parseFloat(e));a=(1==b?a+(f?"++":"--"):a+((f?" += ":" -= ")+b))+(") {\n"+g+"}\n")}else a="",f=c,c.match(/^\w+$/)||Blockly.isNumber(c)||(f=Blockly.Arduino.variableDB_.getDistinctName(b+"_start",Blockly.Variables.NAME_TYPE),a+="var "+f+" = "+c+";\n"),c=d,d.match(/^\w+$/)||Blockly.isNumber(d)||(c=Blockly.Arduino.variableDB_.getDistinctName(b+"_end",Blockly.Variables.NAME_TYPE),a+="var "+c+" = "+d+";\n"),d=Blockly.Arduino.variableDB_.getDistinctName(b+
"_inc",Blockly.Variables.NAME_TYPE),a+="num "+d+" = ",a=Blockly.isNumber(e)?a+(Math.abs(e)+";\n"):a+("("+e+").abs();\n"),a=a+("if ("+f+" > "+c+") {\n")+(Blockly.Arduino.INDENT+d+" = -"+d+";\n"),a+="}\n",a+="for ("+b+" = "+f+"; "+d+" >= 0 ? "+b+" <= "+c+" : "+b+" >= "+c+"; "+b+" += "+d+") {\n"+g+"}\n";return a};
Blockly.Arduino.controls_forEach=function(a){var b=Blockly.Arduino.variableDB_.getName(a.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),c=Blockly.Arduino.valueToCode(a,"LIST",Blockly.Arduino.ORDER_ASSIGNMENT)||"[]",d=Blockly.Arduino.statementToCode(a,"DO"),d=Blockly.Arduino.addLoopTrap(d,a.id);return"for (var "+b+" in "+c+") {\n"+d+"}\n"};
Blockly.Arduino.controls_flow_statements=function(a){switch(a.getFieldValue("FLOW")){case "BREAK":return"break;\n";case "CONTINUE":return"continue;\n"}throw"Unknown flow statement.";};